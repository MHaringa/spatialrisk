<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregate attributes of coordinates to area level — points_to_polygon • spatialrisk</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Aggregate attributes of coordinates to area level — points_to_polygon" />
<meta property="og:description" content="A data.frame containing coordinates (in terms of longitude and latitude) is joined to the polygon level.
   Then arithmetic operations on the attributes of the coordinates are applied to obtain aggregated values for each polygon." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spatialrisk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mharinga/spatialrisk/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate attributes of coordinates to area level</h1>
    <small class="dont-index">Source: <a href='https://github.com/mharinga/spatialrisk/blob/master/R/points_to_polygon.R'><code>R/points_to_polygon.R</code></a></small>
    <div class="hidden name"><code>points_to_polygon.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A data.frame containing coordinates (in terms of longitude and latitude) is joined to the polygon level.
   Then arithmetic operations on the attributes of the coordinates are applied to obtain aggregated values for each polygon.</p>
    </div>

    <pre class="usage"><span class='fu'>points_to_polygon</span><span class='op'>(</span><span class='va'>sf_map</span>, <span class='va'>df</span>, <span class='va'>oper</span>, crs <span class='op'>=</span> <span class='fl'>4326</span>, outside_print <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>sf_map</th>
      <td><p>object of class sf</p></td>
    </tr>
    <tr>
      <th>df</th>
      <td><p>data.frame containing coordinates (column names should be 'lon' and 'lat')</p></td>
    </tr>
    <tr>
      <th>oper</th>
      <td><p>an arithmetic operation on the polygon level</p></td>
    </tr>
    <tr>
      <th>crs</th>
      <td><p>coordinate reference system: integer with the EPSG code, or character with proj4string</p></td>
    </tr>
    <tr>
      <th>outside_print</th>
      <td><p>print points that are not within a polygon (default is FALSE).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <code>sf</code></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Martin Haringa</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='fu'>points_to_polygon</span><span class='op'>(</span><span class='va'>nl_postcode2</span>, <span class='va'>insurance</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>amount</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> 80 points fall not within a polygon.</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Simple feature collection with 90 features and 5 fields</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Geometry type: GEOMETRY</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Dimension:     XY</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Bounding box:  xmin: 3.358524 ymin: 50.7526 xmax: 7.226687 ymax: 53.55053</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> Geodetic CRS:  WGS 84</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> First 10 features:</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    id areaname      lon      lat    output                       geometry</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 1   1       10 4.879542 52.38225 129893079 POLYGON ((5.012625 52.34479...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 2   2       11 4.964842 52.32814  59755600 MULTIPOLYGON (((5.109895 52...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 3   3       12 5.155867 52.23687  48687601 MULTIPOLYGON (((5.317405 52...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 4   4       13 5.196764 52.35673  60964213 MULTIPOLYGON (((5.007205 52...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 5   5       14 4.942569 52.51892  45739347 MULTIPOLYGON (((4.826908 52...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 6   6       15 4.798242 52.46970  29442124 POLYGON ((4.863114 52.43076...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 7   7       16 5.087324 52.68566  29082847 MULTIPOLYGON (((5.029327 52...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 8   8       17 4.864428 52.85513  52473036 MULTIPOLYGON (((4.822374 53...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 9   9       18 4.740657 52.64247  37757398 POLYGON ((4.751882 52.59302...</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 10 10       19 4.663460 52.52935  37393849 POLYGON ((4.682128 52.4188,...</span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='va'>shp_read</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"~/path/to/file.shp"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>points_to_polygon</span><span class='op'>(</span><span class='va'>shp_read</span>, <span class='va'>insurance</span>, <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>amount</span>, na.rm <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martin Haringa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


